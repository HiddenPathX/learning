<!-- 每天三问自己，我为什么这么差劲 -->
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <!-- 在各种设备上都能获得良好的显示效果 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <!-- 添加网站图标favicon -->
    <link rel="icon" href="./images/p1.png" type="image/png">
    
    <title>Learning</title>

    <link rel="stylesheet" href="styles.css">

    <!-- 添加 MathJax 支持，渲染LaTeX公式 -->
    <script id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- 添加樱花效果的脚本 -->
    <script src="https://api.suyanw.cn/api/mouse/yinghua.js"></script>

<!-- ------------一些仅在index.html中使用的css样式------------    -->
<style>

/* 标题 */
h1 {
    color: #333;
    margin: 20px;
    font-size: 2.5em;
    line-height: 1;
}

    /* 应用设置 */
.customization {
    margin-top: 20px;
}

/* 应用设置标签 */    
.customization label {
    display: block;
    margin-bottom: 5px;
    color: #555;
}

/* 应用设置输入框 */
.customization input[type="number"] {
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #ddd;
    width: 80px;
    margin-right: 10px;
}

/* 应用设置按钮 */
.customization button {
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    background-color: #2ecc71;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

/* 应用设置按钮悬停效果 */    
.customization button:hover {
    background-color: #27ae60;
}

/* 控制按钮 */
.controls {
    display: flex;
    flex-direction: column;
    gap: 15px; /* 控制两行按钮之间的间距 */
    align-items: center;
}

/* 主控制按钮和音频控制按钮 */
.main-controls, .audio-controls {
    display: flex;
    gap: 10px; /* 控制同一行按钮之间的间距 */
}

/* 按钮样式 */
.controls button {
    padding: 12px 25px;
    font-size: 1em;
    border: none;
    border-radius: 8px;
    background-color: #3498db;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

/* 按钮悬停效果 */
.controls button:hover {
    background-color: #2980b9;
}

/* 按钮禁用效果 */
.controls button:disabled {
    background-color: #ccc;
    cursor: not-allowed;
}

/* 静音按钮样式 */
.controls button#muteBgmBtn {
    background-color: #f39c12; /* 可以选择一个不同的颜色 */
}

/* 静音按钮悬停效果 */
.controls button#muteBgmBtn:hover {
    background-color: #e67e22;
}

/* 下一首按钮样式 */
.controls button#nextSongBtn {
    background-color: #9b59b6; /* 紫色调 */
}

/* 下一首按钮悬停效果 */
.controls button#nextSongBtn:hover {
    background-color: #8e44ad;
}


/* 奖励 */  
.rewards {
    margin-top: 30px;
    font-size: 1.2em;
    color: #f39c12;
}

/* 奖励图标 */
#coins {
    margin-right: 15px;
}

/* 奖励按钮 */
#rewardBtn {
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    background-color: #e67e22;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

/* 奖励按钮悬停效果 */
#rewardBtn:hover {
    background-color: #d35400;
}

/* 奖励按钮禁用效果 */
#rewardBtn:disabled {
    background-color: #ccc;
    cursor: not-allowed;
}

/* 引用 */
#quote {
    margin-top: 30px;
    font-style: italic;
    color: #777;
    opacity: 0;
    transition: opacity 0.5s ease;
    font-size: 1.5em;
}

/* 引用显示设置为不透明 */
#quote.show {
    opacity: 1;
}

/* 音乐名称显示样式 */
.current-song {
    margin: 10px 0 5px 0;
    font-size: 1.1em;
    color: #3498db;
    font-style: italic;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
    opacity: 0;
    transition: opacity 0.3s ease;
}
/* 音乐名称显示设置为不透明 */
.current-song.show {
    opacity: 1;
}

/* 可拖动图片的样式 */
.draggable-image {
    user-select: none;
    -webkit-user-drag: none;
}

/* 调整时间显示的间距 */
.timer {
    margin: 15px;
    margin-top: -20px;
    line-height: 1;
}

/* ---------------------todo按钮--------------------- */    
.todo-container {
    margin: 10px 0;
    width: 100%;
}

.todo-input {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.todo-input input {
    padding: 8px;
    border-radius: 5px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.1);
    color: white;
}

.todo-input button {
    padding: 12px 25px;
    background-color: #e74c3c;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.todo-input button:hover {
    background-color: #c0392b;
}

.todo-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.todo-item {
    background: rgba(255, 255, 255, 0.1);
    margin-bottom: 10px;
    padding: 15px;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.5s ease;
    transform: translateX(0);
    opacity: 1;
}

.todo-info {
    flex: 1;
}

.todo-time {
    font-size: 0.9em;
    color: rgba(255, 255, 255, 0.7);
    margin-top: 5px;
}

.todo-duration {
    color: #f39c12;
    font-weight: bold;
}

.todo-start-btn {
    padding: 8px 15px;
    background: #2ecc71;
    border: none;
    border-radius: 5px;
    color: white;
    cursor: pointer;
    transition: background 0.3s;
}

.todo-start-btn:hover {
    background: #27ae60;
}

.todo-item:hover {
    transform: translateX(5px);
    background-color: rgba(255, 255, 255, 0.2);
}

.todo-item.completed {
    opacity: 0;
    transform: translateX(100%);
}

.todo-item.active {
    background-color: rgba(46, 204, 113, 0.1);
    border-left: 4px solid #2ecc71;
}

/* 修改预加载动画样式 */
.preload-background {
    background: #0a0a0f;
}

.matrix-text {
    color: #00ff9d;
    text-shadow: 0 0 15px rgba(0, 255, 157, 0.8);
    font-family: 'Orbitron', sans-serif;
}

.progress-bar {
    background: linear-gradient(90deg, #00ff9d, #0f3460);
    box-shadow: 0 0 20px rgba(0, 255, 157, 0.3);
}

/* 修改弹窗背景 */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    overflow-y: auto;
}

/* 修改弹窗内容样式 */
.modal-content.custom-container {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 55px;
    padding: 20px;
    margin: 50px auto;
    color: white;
    position: relative;
}

/* 开始按钮弹窗样式 */
.modal-content.start-modal {
    max-width: 400px;
}

/* 说明按钮弹窗样式 */
.modal-content.help-modal {
    max-width: 800px;
}

/* 修改关闭按钮样式 */
.close-button {
    position: absolute;
    right: 20px;
    top: 15px;
    color: white;
    font-size: 28px;
    cursor: pointer;
    transition: color 0.3s;
}

.close-button:hover {
    color: #ff4444;
}

/* 修改输入框样式 */
.customization input[type="number"] {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    padding: 8px;
    border-radius: 5px;
}

/* 修改标签样式 */
.customization label {
    color: rgba(255, 255, 255, 0.9);
    margin: 10px 0;
}

/* 修改按钮样式 */
.customization button {
    background: rgba(46, 204, 113, 0.8);
    border: none;
    padding: 10px 20px;
    color: white;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.3s;
    margin: 10px 5px;
}

.customization button:hover {
    background: rgba(46, 204, 113, 1);
}

/* 帮助内容样式 */
.help-content {
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
}

/* 滚动条样式 */
.modal-content::-webkit-scrollbar {
    width: 8px;
}

.modal-content::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
}

.modal-content::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
}

.modal-content::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.4);
}

</style>

<!-- 添加字体链接 -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600&display=swap" rel="stylesheet">

</head>


<!----------------------------------- indexhtml专用body ----------------------------------- -->
<body class="html_body">
    <!-- 添加预加载提示 -->
    <div class="preload-background">
        <canvas id="matrix-canvas"></canvas>
        <div class="loading-content">
            <div class="matrix-text">System Loading...</div>
            <div class="loading-progress">
                <div class="progress-bar"></div>
            </div>
            <div class="matrix-text-small">Initializing Matrix...</div>
        </div>
    </div>
    
    <!-- 可拖动的图片 -->
    <!-- <img src="https://media.giphy.com/media/BOPrq7m5jYS1W/giphy.gif?cid=ecf05e47thyimsex5sbgp71wsdltktt003kah1f7bv3k8zk3&ep=v1_stickers_search&rid=giphy.gif&ct=s" 
        alt="拖动" 
        class="draggable-image" 
        loading="lazy"
        decoding="async"
        style="position: fixed; right: 20px; top: 50px; height: 40vh; cursor: move;"> -->
    
 
        

    <!-- 第一个容器 -->
    <div class="container">
      
      
      
        <div class="timer">
            <span id="minutes">60</span>:<span id="seconds">00</span>
        </div>

        <div class="controls">
            <div class="main-controls">
                <button id="openBtn">开始</button>
                <button id="pauseBtn" disabled>暂停</button>
                <button id="stopBtn" disabled>重置</button>
                <button id="helpBtn">说明</button>
            </div>
            <div class="audio-controls">
                <button id="muteBgmBtn">静音</button>
                <div class="volume-control">
                    <input type="range" id="volumeSlider" min="0" max="100" value="50">
                    <span id="volumeValue">50%</span>
                </div>
                <button id="nextSongBtn">下一首</button>
            </div>
        </div>

        <div class="rewards">
            <span id="coins">番茄: 0</span>
            <button id="rewardBtn" disabled>奖励 (需消耗 2 番茄)</button>
        </div>

        <div class="todo-container">
            <ul id="todoList" class="todo-list"></ul>
        </div>
        <!-- 添加音乐名称显示 -->
        <div id="current-song" class="current-song"></div>
        
        <div id="quote"></div>
    </div>


    <div class="container2">  
        <h2>任务日历</h2>
        <div id="love-quote" style="width: 100%; height: 50px; color: #FFFFFF; text-align: center; padding: 15px 0;"></div>
        
        <div class="calendar-container">
            <div class="calendar-header">
                <button id="prevMonth">&lt;</button>
                <h2 id="monthDisplay"></h2>
                <button id="nextMonth">&gt;</button>
            </div>
            <div class="weekdays">
                <div>日</div>
                <div>一</div>
                <div>二</div>
                <div>三</div>
                <div>四</div>
                <div>五</div>
                <div>六</div>
            </div>
            <div class="calendar-grid" id="calendarGrid"></div>
        </div>
    </div>

    <div class="day-tasks-panel" id="dayTasksPanel">
        <div class="day-tasks-header">
            <h3 id="selectedDate"></h3>
            <button class="close-day-tasks">&times;</button>
        </div>
        <div class="tasks-status">
            <div class="status-item">
                <span class="status-dot pending"></span>
                <span>待完成</span>
                <span id="pendingCount">0</span>
            </div>
            <div class="status-item">
                <span class="status-dot completed"></span>
                <span>已完成</span>
                <span id="completedCount">0</span>
            </div>
        </div>
        
        <div class="todo-input">
            <input type="text" id="todoInput" placeholder="输入任务名称..." required>
            <div class="time-inputs">
                <input type="number" 
                    id="todoDuration" 
                    placeholder="工作时长(分钟)" 
                    min="1" 
                    max="60" 
                    title="请输入1-60分钟之间的时长"
                    required>
                <input type="time" 
                    id="todoStartTime"
                    placeholder="开始时间">
                <input type="time" 
                    id="todoEndTime" 
                    placeholder="结束时间">
            </div>
            <button id="addTodoBtn">添加任务</button>
        </div>

        <div class="day-tasks-list" id="dayTasksList"></div>
    </div>
    <div class="modal-overlay" id="taskModalOverlay"></div>

    <!-- 第三个容器 -->
    <div class="container">
        <div class="auth-buttons">
            <button class="auth-btn active" onclick="showForm('login')">登录页</button>
            <button class="auth-btn" onclick="showForm('register')">注册页</button>
        </div>

        <!-- 登录表单 -->
        <form class="login-form form-active" id="loginForm">
            <div class="form-group">
                <input type="text" placeholder="用户名" required>
            </div>
            <div class="form-group">
                <input type="password" placeholder="密码" required>
            </div>
            <button type="submit" class="submit-btn">登录</button>
        </form>

        <!-- 注册表单 -->
        <form class="register-form" id="registerForm">
            <div class="form-group">
                <input type="text" placeholder="用户名" required>
            </div>
            <div class="form-group">
                <input type="password" placeholder="密码" required>
            </div>
            <div class="form-group">
                <input type="password" placeholder="确认密码" required>
            </div>
            <button type="submit" class="submit-btn">注册</button>
        </form>

        <!-- 用户资料面板 -->
        <div class="user-profile" id="userProfile">
             <div class="profile-header">
               
                <h2 class="username">显示学习数据</h2> 
            </div> 

            <div class="study-stats">
                <!-- <h3>学习统计</h3> -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="todayStudyTime">0</div>
                        <div class="stat-label">今日学习(分钟)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="weekTotalTime">0</div>
                        <div class="stat-label">本周总时长(分钟)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalSessions">0</div>
                        <div class="stat-label">专注次数</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="averageTime">0</div>
                        <div class="stat-label">平均时长(分钟)</div>
                    </div>
                </div>

                <div class="study-chart">
                    <h3>本周学习记录</h3>
                    <div class="chart-container" id="weeklyChart"></div>
                </div>
            </div>

            <button class="logout-btn" onclick="logout()">退出登录</button>
        </div>
    </div>


<!-- 第三个容器 -->
<div class="container3">  
    <h2>-😳-</h2>   
    <div class="chat-container"></div>
        <div id="chat-messages" class="chat-messages"></div>
        <div class="chat-input">
             <div class="input-container">
                <textarea id="user-input" placeholder="有什么可以帮你的吗..." rows="2"></textarea>
                <div class="button-group">
                    <input type="file" id="file-input" multiple style="display: none;">
                    <button id="upload-button" class="upload-button">上传</button>
                    <button id="send-button">发送</button>
                </div>
            </div>
        </div>    
    </div>
</div>


    <!-- 当点击启动按钮时，在整个页面添加粒子效果 -->
    <div id="particles-container" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 9999;
        display: none;
    "></div>  
    
    <audio id="bgm" loop preload="none">
        <source src="songs/m1.mp3" type="audio/mpeg">
        你的浏览器不支持音频播放。
    </audio>
    <audio id="alarm" preload="auto">
        <source src="songs/alarm.mp3" type="audio/mpeg">
        你的浏览器不支持音频播放。
    </audio> 
    <audio id="alarmBreak" preload="auto">
        <source src="songs/alarm2.mp3" type="audio/mpeg">
        你的浏览器不支持音频播放。
    </audio> 




    
   
    <!-- 交互弹窗结构 -->
    <div id="openModal" class="modal">
        <div class="modal-content custom-container start-modal">
            <div class="controls">
                <span class="close-button">&times;</span>
                <h2>🌟 使用窗口</h2>
                <div class="help-content">
                    <div class="customization">
                        <label for="workTime">工作时长 (分钟):</label>
                        <input type="number" id="workTime" value="25" min="1">
                        <label for="breakTime">休息时长 (分钟):</label>
                        <input type="number" id="breakTime" value="5" min="1">
                        
                        <button id="applyCustom">应用</button>
                        <button id="startBtn">启动</button>
                    </div>
                </div>  
            </div>
        </div>
    </div>

    <div id="helpModal" class="modal">
        <div class="modal-content custom-container help-modal">
            <span class="close-button" id="helpCloseBtn">&times;</span>
        
            <h1 style="color: #2ecc71; text-align: center;">🌟 Timeboxing 时间管理工具使用指南</h1>

    <h2 style="border-bottom: 2px solid #3498db; padding-bottom: 8px;">
        📚 一、什么是 Timeboxing？
    </h2>
    <p>Timeboxing（时间盒法）是哈佛大学研究验证的高效时间管理方法，相当于番茄钟与TO-DO-LIST的结合，它通过为每个任务设定固定的时间段（"时间盒"），帮助您：</p>
    <ul style="list-style: none; padding-left: 20px;">
        <li>🎯 提升专注度和工作效率</li>
        <li>⏰ 避免任务无限期拖延</li>
        <li>💪 更好地掌控时间</li>
        <li>📖 <a href="https://www.mindtools.com/a9bt6jr/timeboxing" target="_blank" 
            style="color: #3498db; text-decoration: none;">
            更全面的了解TIME-BOXING时间管理技巧 👈
        </a></li>
    </ul>

    <h2 style="border-bottom: 2px solid #3498db; padding-bottom: 8px;">
        🔍 二、使用步骤
    </h2>

    <h3>1️⃣ 添加任务</h3>
    <ul style="list-style: none; padding-left: 20px;">
        <li>▶️ 点击"开始"按钮，打开任务添加窗口</li>
        <li>📝 填写任务信息：
            <ul style="list-style: none; padding-left: 20px; margin-top: 10px;">
                <li>
                    <strong>任务名称：</strong>具体描述要完成的事项，如"<kbd style="background: #f1f1f1; padding: 2px 5px; border-radius: 3px;">撰写报告初稿</kbd>"
                </li>
                <li>
                    <strong>任务时长：</strong>预估完成时间，如"<kbd style="background: #f1f1f1; padding: 2px 5px; border-radius: 3px;">30分钟</kbd>"
                </li>
                <li>
                    <strong>时间段（可选）：</strong>设置具体执行时间，如"<kbd style="background: #f1f1f1; padding: 2px 5px; border-radius: 3px;">14:00-14:30</kbd>"
                </li>
            </ul>
        </li>
    </ul>

    <h3>2️⃣ 开始专注</h3>
    <ul style="list-style: none; padding-left: 20px;">
        <li>📋 在任务列表中选择要执行的任务</li>
        <li>▶️ 点击对应的"开始任务"按钮</li>
        <li>⏱️ 系统开始倒计时，请专注完成当前任务</li>
    </ul>

    <h2 style="border-bottom: 2px solid #3498db; padding-bottom: 8px;">
        💡 三、使用技巧
    </h2>

    <h3>⚙️ 时间管理建议</h3>
    <ul style="list-style: none; padding-left: 20px;">
        <li>📊 合理评估任务时长，循序渐进提高准确度</li>
        <li>🌟 任务间适当休息 5-10 分钟</li>
        <li>🔄 根据实际情况灵活调整时间，但避免频繁修改</li>
    </ul>

    <h3>🎯 Timeboxing 方法优势</h3>
    <ul style="list-style: none; padding-left: 20px;">
        <li>🎯 <strong>提升专注力：</strong>明确时限促进专注</li>
        <li>⚡️ <strong>提高效率：</strong>避免时间浪费</li>
        <li>✅ <strong>克服拖延：</strong>任务分解更易执行</li>
        <li>😌 <strong>减轻压力：</strong>有序安排缓解焦虑</li>
        <li>⏰ <strong>时间掌控：</strong>提升时间评估能力</li>
    </ul>

    <h3>⚠️ 注意事项</h3>
    <ul style="list-style: none; padding-left: 20px; color: #e74c3c;">
        <li>❗ 添加的任务只有倒计时结束后才会被清除</li>
        <li>❗ 为保持专注，任务时长只能填写 10-60 分钟</li>
        <li>❗ 你仍可以通过使用窗口的启动按钮，仅进行番茄钟的倒计时</li>
    </ul>

    <p style="text-align: center; font-size: 1.2em; margin-top: 30px;">
        <strong>💪 准备好开始高效的一天了吗？让我们用 Timeboxing 时间管理法，告别拖延，实现目标！</strong>
    </p>
           
        </div>
    </div>

    
<!-- 链接外部javascript脚本，一般不放在head里 -->
<script src="js/preloader.js"></script>
<script src="script.js"></script>   
<script src="js/love-quote.js"></script>

    <!-- 添加一个控制按钮 -->
    <button onclick="stopp()" style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 100000;
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.208);
        border: none;
        border-radius: 55px;
        cursor: pointer;
    ">樱花效果</button>

</body>
</html>
